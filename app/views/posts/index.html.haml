.page-header
  %h1=t '.title', :default => [:'helpers.titles.index', 'Index of %{model}'], :model => Post.model_name.human

= render "search_form"

- posts = @posts.page(params[:page])
= paginate posts
%table.table
  %tr
    %th= User.human_attribute_name(:username)
    %th= sort_link @q, :created_at, "投稿日時"
    %th= Post.human_attribute_name(:text)
    %th= Post.human_attribute_name(:url)
    %th= sort_link @q, :comments_count, 'コメント数'
    %th=t '.actions', :default => t("helpers.actions")

  - posts.each do |post|
    %tr
      %td= link_to_user(post.user)
      %td= link_to l(post.created_at), post
      %td= post.text
      %td= link_to post.url,post.url
      %td= post.comments_count
      %td
        = link_to t('.edit', :default => t("helpers.links.edit")), edit_post_path(post), :class => 'btn btn-mini' if can? :edit, post
        = link_to t('.destroy', :default => t("helpers.links.destroy")), post_path(post), :method => :delete, :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-mini btn-danger' if can? :destroy, post
= paginate posts